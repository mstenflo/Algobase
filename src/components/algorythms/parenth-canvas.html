<!DOCTYPE html>
<html>
<head>
  <title>Parentheses Validator</title>
  <style>
    canvas {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <canvas id="canvas" width="400" height="300"></canvas>

  <script>
    function isValidParentheses(str) {
      const stack = [];
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const boxWidth = 40;
      const boxHeight = 30;
      const boxMargin = 10;
      let x = 20;
      const y = 100;

      for (let i = 0; i < str.length; i++) {
        const char = str[i];

        if (char === '(' || char === '[' || char === '{') {
          stack.push(char);
        } else if (char === ')' || char === ']' || char === '}') {
          if (stack.length === 0) {
            return false;
          }

          const lastOpening = stack.pop();
          const expectedClosing = getMatchingOpeningBracket(char);

          if (lastOpening !== expectedClosing) {
            return false;
          }
        }

        // Clear canvas and draw stack
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawStack(stack);
      }

      return stack.length === 0;
    }

    function getMatchingOpeningBracket(closingBracket) {
      switch (closingBracket) {
        case ')':
          return '(';
        case ']':
          return '[';
        case '}':
          return '{';
        default:
          return null;
      }
    }

    function drawStack(stack) {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const boxWidth = 40;
      const boxHeight = 30;
      const boxMargin = 10;
      let x = 20;
      const y = 100;

      for (let i = 0; i < stack.length; i++) {
        const boxX = x + i * (boxWidth + boxMargin);
        const boxY = y;

        ctx.fillStyle = 'lightblue';
        ctx.fillRect(boxX, boxY, boxWidth, boxHeight);

        ctx.strokeStyle = 'black';
        ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);

        ctx.fillStyle = 'black';
        ctx.font = 'bold 16px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(stack[i], boxX + boxWidth / 2, boxY + boxHeight / 2);
      }
    }

    function visualizeParentheses(str) {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const isValid = isValidParentheses(str);

      const result = isValid ? 'valid' : 'NOT valid';
      ctx.fillStyle = isValid ? 'green' : 'red';
      ctx.font = 'bold 24px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(result, canvas.width / 2, canvas.height / 2);
    }

    // Example usage:
    visualizeParentheses(""); // Empty string
    setTimeout(() => visualizeParentheses("()"), 2000); // Valid parentheses after 2 seconds
    setTimeout(() => visualizeParentheses("()[]{}"), 4000); // Valid parentheses after 4 seconds
    setTimeout(() => visualizeParentheses("(]"), 6000); // Invalid parentheses after 6 seconds
    setTimeout(() => visualizeParentheses("([)]"), 8000); // Invalid parentheses after 8 seconds
    setTimeout(() => visualizeParentheses("{[]}"), 10000); // Valid parentheses after 10 seconds
  </script>
</body>
</html>
